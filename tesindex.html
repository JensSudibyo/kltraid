<!DOCTYPE html>
<html>
<head>
    <title>Channel Tester</title>
    <style>
        button {
            padding: 10px 20px;
            margin: 10px;
            font-size: 16px;
            cursor: pointer;
        }
        iframe {
            width: 100%;
            height: 80vh;
            border: none;
        }
    </style>
</head>
<body>
    <h1>Channel Selector</h1>
    <button onclick="changeChannel('sscex1')">Channel 1</button>
    <button onclick="changeChannel('sscex2')">Channel 2</button>
    <button onclick="changeChannel('sscex3')">Channel 3</button>
    
    <iframe id="playerFrame" src="player.html"></iframe>

<script>
    const playerFrame = document.getElementById('playerFrame');
    const allowedOrigin = 'https://kltraid.pages.dev';
    
    // Tambahkan parameter cache busting
    playerFrame.src = `${allowedOrigin}/player.html?t=${Date.now()}`;

    function changeChannel(channel) {
        console.log('Sending message to:', allowedOrigin);
        playerFrame.contentWindow.postMessage({
            type: 'CHANGE_CHANNEL',
            channel: channel
        }, allowedOrigin);
    }
    
    // Tambahkan error handling untuk iframe
    playerFrame.addEventListener('load', () => {
        console.log('Iframe loaded successfully');
    });
    
    playerFrame.addEventListener('error', (err) => {
        console.error('Iframe loading error:', err);
    });
</script>
</body>
</html>
